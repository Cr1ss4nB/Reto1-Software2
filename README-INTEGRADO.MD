# Reto4 - Ecosistema de Microservicios Integrado

Este proyecto implementa un ecosistema completo de microservicios para la gesti√≥n de √≥rdenes y usuarios con integraci√≥n total entre servicios.

## üèóÔ∏è Arquitectura

El proyecto est√° compuesto por los siguientes microservicios integrados:

1. **Eureka Server** (Puerto 8761) - Servidor de descubrimiento de servicios
2. **API Gateway** (Puerto 8080) - Punto de entrada √∫nico con enrutamiento inteligente
3. **Login Microservice** (Puerto 8081) - Autenticaci√≥n y autorizaci√≥n JWT
4. **User Management Microservice** (Puerto 8083) - Gesti√≥n completa de usuarios/clientes
5. **Order Management Microservice** (Puerto 8082) - Gesti√≥n de √≥rdenes
6. **Frontend** (Puerto 3000) - Interfaz de usuario React con integraci√≥n completa

## üöÄ Inicio R√°pido

### Opci√≥n 1: Script Autom√°tico (Recomendado)
```bash
# Iniciar todos los servicios
start-services.bat

# Detener todos los servicios
stop-services.bat
```

### Opci√≥n 2: Inicio Manual
```bash
# 1. Eureka Server
cd eureka && mvn spring-boot:run

# 2. User Management Service (Go)
cd userMgmtMicroservice && go run main.go

# 3. Login Microservice
cd loginMicroservice && mvn spring-boot:run

# 4. API Gateway
cd gateway && mvn spring-boot:run

# 5. Order Management Service (Python)
cd orderMgmtMicroservice && python main.py

# 6. Frontend
cd frontend && npm start
```

## üîß Tecnolog√≠as Integradas

- **Backend**: Java (Spring Boot), Go (Gin), Python (FastAPI)
- **Frontend**: React con Context API
- **Base de Datos**: MySQL con conexiones optimizadas
- **Servicio de Descubrimiento**: Netflix Eureka con registro autom√°tico
- **API Gateway**: Spring Cloud Gateway con load balancing
- **Autenticaci√≥n**: JWT con validaci√≥n distribuida
- **Comunicaci√≥n**: HTTP/REST con descubrimiento autom√°tico

## üìä Servicios Disponibles

### üåê API Gateway (Puerto 8080)
- **Rutas Integradas**:
  - `/login/**` ‚Üí Login Microservice
  - `/customer/**` ‚Üí User Management Service
  - `/order/**` ‚Üí Order Management Service

### üîç Servicios Individuales
- **Eureka Dashboard**: http://localhost:8761
- **API Gateway**: http://localhost:8080
- **Login Service**: http://localhost:8081
- **User Management Service**: http://localhost:8083
- **Order Management Service**: http://localhost:8082
- **Frontend**: http://localhost:3000

## üîê Autenticaci√≥n Integrada

El sistema utiliza JWT para autenticaci√≥n distribuida:
- **Registro**: `/login/createuser`
- **Login**: `/login/authuser`
- **Validaci√≥n**: Autom√°tica en todos los servicios protegidos

## üë• Gesti√≥n de Usuarios

### Endpoints Disponibles
- `GET /customer/findcustomerbyid?customerid={id}` - Obtener usuario
- `POST /customer/createcustomer` - Crear usuario
- `PUT /customer/updatecustomer` - Actualizar usuario

### Funcionalidades
- ‚úÖ Registro de usuarios
- ‚úÖ Autenticaci√≥n JWT
- ‚úÖ Gesti√≥n de perfiles
- ‚úÖ Integraci√≥n con √≥rdenes

## üì¶ Gesti√≥n de √ìrdenes

### Endpoints Disponibles
- `GET /order/findorderbycustomerid?customerid={id}` - √ìrdenes por usuario
- `POST /order/createorder` - Crear orden
- `PUT /order/updateorderstatus` - Actualizar estado

## üéØ Caracter√≠sticas del Ecosistema

### ‚úÖ Integraci√≥n Completa
- **Descubrimiento Autom√°tico**: Todos los servicios se registran en Eureka
- **Load Balancing**: Distribuci√≥n autom√°tica de carga
- **Health Checks**: Monitoreo de estado de servicios
- **Fallback**: Manejo de errores distribuido

### ‚úÖ Seguridad
- **JWT Distribuido**: Autenticaci√≥n en todos los servicios
- **CORS Configurado**: Acceso controlado desde frontend
- **Validaci√≥n Centralizada**: Seguridad en el gateway

### ‚úÖ Escalabilidad
- **Microservicios Independientes**: Escalamiento individual
- **Base de Datos Separada**: Aislamiento de datos
- **Configuraci√≥n Flexible**: Variables de entorno

## üõ†Ô∏è Configuraci√≥n de Base de Datos

### Bases de Datos Requeridas
```sql
-- Base de datos para login
CREATE DATABASE loginDB;
CREATE USER 'loginUser'@'localhost' IDENTIFIED BY 'Login123.';
GRANT ALL PRIVILEGES ON loginDB.* TO 'loginUser'@'localhost';

-- Base de datos para usuarios
CREATE DATABASE userdb;
CREATE USER 'root'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON userdb.* TO 'root'@'localhost';

-- Base de datos para √≥rdenes
CREATE DATABASE orderdb;
```

## üö¶ Estado de Servicios

El frontend incluye un dashboard que muestra el estado de todos los servicios:
- ‚úÖ **Gateway**: Disponible
- ‚úÖ **Login**: Disponible  
- ‚úÖ **User Management**: Disponible
- ‚è≥ **Order Management**: En desarrollo

## üîÑ Flujo de Trabajo

1. **Usuario accede** al frontend (http://localhost:3000)
2. **Registro/Login** a trav√©s del API Gateway
3. **Autenticaci√≥n JWT** distribuida a todos los servicios
4. **Gesti√≥n de usuarios** a trav√©s del User Management Service
5. **Creaci√≥n de √≥rdenes** vinculadas al usuario autenticado
6. **Monitoreo** del estado de servicios en tiempo real

## üêõ Soluci√≥n de Problemas

### Servicios no se registran en Eureka
- Verificar que Eureka Server est√© ejecut√°ndose en puerto 8761
- Revisar logs de cada microservicio
- Verificar conectividad de red

### Errores de autenticaci√≥n
- Verificar que el JWT secret sea el mismo en todos los servicios
- Revisar headers de autorizaci√≥n en las peticiones

### Problemas de base de datos
- Verificar que MySQL est√© ejecut√°ndose
- Confirmar credenciales y nombres de base de datos
- Revisar logs de conexi√≥n

## üìà Pr√≥ximas Mejoras

- [ ] Implementaci√≥n completa del Order Management Service
- [ ] M√©tricas y monitoreo con Prometheus
- [ ] Logs centralizados con ELK Stack
- [ ] CI/CD con Docker y Kubernetes
- [ ] Tests de integraci√≥n automatizados

## ü§ù Contribuci√≥n

Para contribuir al proyecto:

1. Fork el repositorio
2. Crear una rama para tu feature: `git checkout -b feature/nueva-funcionalidad`
3. Hacer commit de tus cambios: `git commit -m 'Agregar nueva funcionalidad'`
4. Push a la rama: `git push origin feature/nueva-funcionalidad`
5. Crear un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo `LICENSE` para m√°s detalles.
